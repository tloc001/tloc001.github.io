import{q as E,_ as T,r as d,d as $,e as M,w as C,c as n,a as t,b as F,f as O,n as R,h as c,g as L,v as u,x as H,t as r,F as v,k as b,u as j,o as a}from"./index-D71806xI.js";import{f as g}from"./CommonsFunctions-HU9KhWMu.js";import{c as G,_ as K}from"./DashBoard-Dca6KqdS.js";async function J(){return(await E.get("/VariantValues")).data}async function Q(p){return(await E.get("/"+p)).data}const W={class:"container-fluid row"},X={class:"aside col-3"},Y={class:"article col-9"},Z=["for"],tt=["id","hidden"],et={class:"dropdown"},st={class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},ot={key:0},lt=["src"],nt={key:1},at={class:"dropdown-menu",style:{width:"100%","max-height":"300px","overflow-y":"auto"}},it=["onClick"],rt=["src"],dt={class:"text-muted"},ct={class:"dropdown"},ut={class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},pt={key:0},mt={key:1},yt={class:"dropdown-menu",style:{width:"100%","max-height":"300px","overflow-y":"auto"}},_t=["onClick"],ht={class:"mb-3"},ft=["for"],vt=["id"],bt={class:"mb-3"},gt=["for"],wt=["id"],kt={class:"dropdown-grid"},St={class:"dropdown"},Vt={class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},Ct={key:0},Pt={key:1},Bt={class:"dropdown-menu",style:{width:"100%","max-height":"300px","overflow-y":"auto"}},Et=["onClick"],xt={class:"text-muted"},It={class:"dropdown"},qt={class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},At={key:0},Dt={key:1},Ut={class:"dropdown-menu",style:{width:"100%","max-height":"300px","overflow-y":"auto"}},Nt=["onClick"],zt={class:"text-muted"},Tt={class:"mb-3"},$t=["for"],Mt=["id"],Ft={class:"mb-3"},Ot=["for"],Rt=["id"],Lt={class:"mb-3"},Ht=["for"],jt=["id"],Gt={class:"mb-3"},Kt=["for"],Jt=["id"],Qt={class:"mb-3"},Wt=["for"],Xt=["id"],Yt=["disable"],Zt={key:0},te={key:1},ee={key:2},se={__name:"Form",props:{TableName:{type:String,required:!0},action:{type:String,required:!0},id:{type:String,required:!0}},setup(p){const w=j(),i=p,k=G(i.TableName),S=d(),o=$({id:"",cost:"",price:"",turnBuy:"",description:"",sku:"",safetyStock:"",qty:"",sellStart:"",sellEnd:"",createdAt:"",updatedAt:""}),x=["Accounts","Authorities","BaseProducts","Cancels","CartItems","Catalogs","Categories","CostHistories","Coupons","News","OrderItems","Orders","PaymentMethods","PriceHistories","ProductImages","ProductItems","PromotionProduct","Promotions","PurchaseOrderItems","PurchaseOrders","Returns","Reviews","Roles","ShippingMethods","UserAddresses","VariantValues","Variants"];async function I(){console.log(o);try{const e=await k.update(i.id,o);console.log("Insert successful:",e.data),w.push(`/Admin/${i.TableName}`)}catch(e){console.error("Insert failed:",e)}}async function q(){console.log(o);try{const e=await k.post(o);console.log("Insert successful:",e.data),w.push(`/Admin/${i.TableName}`)}catch(e){console.error("Insert failed:",e)}}const h=d([]),P=d(new Map),A=async()=>{if(i.TableName)try{const e=await k.getById(i.id);e.data.createdAt=g(e.data.createdAt),e.data.updatedAt=g(e.data.updatedAt),e.data.sellStart=g(e.data.sellStart),e.data.sellSEnd=g(e.data.sellSEnd),Object.assign(o,e.data)}catch(e){console.error("Get failed:",e)}},_=d(null),V=d(null),m=d(""),y=d(""),B=d([]);function D(e){console.log(e),_.value=e,o.baseProductId=e.id,o.cost=e.cost,o.price=e.listPriceRaw,B.value=e.listPrice,o.turnBuy=e.turnBuy,o.safetyStock=e.safetyStock,o.description=e.description,o.safetyStock=e.safetyStock,o.qty=e.qty}function U(e){m.value=e}function N(e){y.value=e}function z(e){V.value=e,o.price=e}return M(async()=>{h.value=await J(),P.value=await Q("BaseProducts"),console.log(h.value)}),C(()=>i.id,A),C([()=>m.value,()=>y.value],()=>{var e,l;S.value=((e=m.value)==null?void 0:e.signalSku)+"-"+((l=y.value)==null?void 0:l.signalSku)}),C(()=>S.value,()=>{o.sku=S.value}),(e,l)=>(a(),n("div",W,[t("div",X,[F(K,{listDashBoard:x})]),t("div",Y,[t("form",{onSubmit:l[8]||(l[8]=O(s=>i.action==="create"?q():I(),["prevent"]))},[t("div",{class:"mb-3",style:R(i.action==="view"||i.action==="create"?" display:none;":"")},[t("label",{for:p.id,class:"form-label text-capitalize"},null,8,Z),i.action!=="create"?c((a(),n("input",{key:0,id:p.id,"onUpdate:modelValue":l[0]||(l[0]=s=>o.id=s),hidden:i.action==="view",type:"number",class:"form-control",placeholder:"Enter id"},null,8,tt)),[[u,o.id]]):L("",!0)],4),t("div",et,[t("button",st,[_.value?(a(),n("span",ot,[t("img",{src:_.value.mainImage,alt:"",width:"30",height:"30",class:"me-2"},null,8,lt),H(" "+r(_.value.name)+" ("+r(_.value.material)+") ",1)])):(a(),n("span",nt,"Select a product"))]),t("ul",at,[(a(!0),n(v,null,b(P.value,s=>(a(),n("li",{key:s.id,onClick:f=>D(s),class:"dropdown-item d-flex align-items-center",style:{cursor:"pointer"}},[t("img",{src:s.mainImage,alt:"",width:"40",height:"40",class:"me-2"},null,8,rt),t("div",null,[t("strong",null,r(s.name),1),l[9]||(l[9]=t("br",null,null,-1)),t("small",dt,r(s.material),1)])],8,it))),128))])]),t("div",ct,[t("button",ut,[V.value?(a(),n("span",pt,r(V.value),1)):(a(),n("span",mt,"Select a Price"))]),t("ul",yt,[(a(!0),n(v,null,b(B.value,(s,f)=>(a(),n("li",{key:f,onClick:oe=>z(s),class:"dropdown-item d-flex align-items-center",style:{cursor:"pointer"}},[t("div",null,[t("strong",null,r(s),1),l[10]||(l[10]=t("br",null,null,-1))])],8,_t))),128))])]),t("div",ht,[t("label",{for:e.turnBuy,class:"form-label text-capitalize"},"turnBuy",8,ft),c(t("input",{id:e.turnBuy,"onUpdate:modelValue":l[1]||(l[1]=s=>o.turnBuy=s),type:"number",class:"form-control",placeholder:"Enter turnBuy"},null,8,vt),[[u,o.turnBuy]])]),t("div",bt,[t("label",{for:e.description,class:"form-label text-capitalize"},"description",8,gt),c(t("input",{id:e.description,"onUpdate:modelValue":l[2]||(l[2]=s=>o.description=s),type:"text",class:"form-control",placeholder:"Enter description"},null,8,wt),[[u,o.description]])]),t("div",kt,[t("div",St,[t("button",Vt,[m.value?(a(),n("span",Ct,r(m.value.name)+" ("+r(m.value.description)+") ",1)):(a(),n("span",Pt,"Select a color"))]),t("ul",Bt,[(a(!0),n(v,null,b(h.value["Màu sắc"],s=>(a(),n("li",{key:s.id,onClick:f=>U(s),class:"dropdown-item d-flex align-items-center",style:{cursor:"pointer"}},[t("div",null,[t("strong",null,r(s.description),1),l[11]||(l[11]=t("br",null,null,-1)),t("small",xt,r(s.name),1)])],8,Et))),128))])]),t("div",It,[t("button",qt,[y.value?(a(),n("span",At,r(y.value.name)+" ("+r(y.value.description)+") ",1)):(a(),n("span",Dt,"Select a size"))]),t("ul",Ut,[(a(!0),n(v,null,b(h.value["Kích thước"],s=>(a(),n("li",{key:s.id,onClick:f=>N(s),class:"dropdown-item d-flex align-items-center",style:{cursor:"pointer"}},[t("div",null,[t("strong",null,r(s.description),1),l[12]||(l[12]=t("br",null,null,-1)),t("small",zt,r(s.name),1)])],8,Nt))),128))])])]),t("div",Tt,[t("label",{for:e.sku,class:"form-label text-capitalize"},"sku",8,$t),c(t("input",{id:e.sku,"onUpdate:modelValue":l[3]||(l[3]=s=>o.sku=s),type:"text",class:"form-control",placeholder:"Enter sku"},null,8,Mt),[[u,o.sku]])]),t("div",Ft,[t("label",{for:e.safetyStock,class:"form-label text-capitalize"},"safetyStock",8,Ot),c(t("input",{id:e.safetyStock,"onUpdate:modelValue":l[4]||(l[4]=s=>o.safetyStock=s),type:"number",class:"form-control",placeholder:"Enter safetyStock"},null,8,Rt),[[u,o.safetyStock]])]),t("div",Lt,[t("label",{for:e.qty,class:"form-label text-capitalize"},"qty",8,Ht),c(t("input",{id:e.qty,"onUpdate:modelValue":l[5]||(l[5]=s=>o.qty=s),type:"number",class:"form-control",placeholder:"Enter qty"},null,8,jt),[[u,o.qty]])]),t("div",Gt,[t("label",{for:e.sellStart,class:"form-label text-capitalize"},"sellStart",8,Kt),c(t("input",{id:e.sellStart,"onUpdate:modelValue":l[6]||(l[6]=s=>o.sellStart=s),type:"datetime",class:"form-control",placeholder:"Enter sellStart"},null,8,Jt),[[u,o.sellStart]])]),t("div",Qt,[t("label",{for:e.sellEnd,class:"form-label text-capitalize"},"sellEnd",8,Wt),c(t("input",{id:e.sellEnd,"onUpdate:modelValue":l[7]||(l[7]=s=>o.sellEnd=s),type:"datetime",class:"form-control",placeholder:"Enter sellEnd"},null,8,Xt),[[u,o.sellEnd]])]),t("button",{type:"submit",disable:i.action=="view",class:"btn btn-primary"},[i.action==="create"?(a(),n("span",Zt,"Create")):i.action==="create"?(a(),n("span",te,"Create")):(a(),n("span",ee,"Update"))],8,Yt)],32)])]))}},ie=T(se,[["__scopeId","data-v-dab63dcc"]]);export{ie as default};
