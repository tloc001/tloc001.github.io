import{i as N,c as s,o,a as e,h as S,t as V,j as E,m as L,_ as A,r as v,w as g,F as k,k as w,b as j,e as I,g as $,l as M,p as F,f as C,u as P}from"./index-D71806xI.js";import{c as U}from"./DashBoard-Dca6KqdS.js";const z={class:"mb-3"},B=["for"],O=["id","type","placeholder"],q={__name:"BaseInput",props:{modelValue:[String,Number],label:String,placeholder:String,type:{type:String,default:"text"},id:String},emits:["update:modelValue"],setup(i,{emit:b}){const n=i,l=b,m=N({get:()=>n.modelValue,set:a=>l("update:modelValue",a)});return(a,u)=>(o(),s("div",z,[e("label",{for:i.id,class:"form-label text-capitalize"},V(i.label),9,B),S(e("input",L({id:i.id,type:i.type,class:"form-control",placeholder:i.placeholder},a.$attrs,{"onUpdate:modelValue":u[0]||(u[0]=r=>m.value=r)}),null,16,O),[[E,m.value]])]))}},R={class:"accordion filter-item",id:"accordionFlushExample"},G={class:"accordion-item rounded-3 border-0"},H={id:"flush-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"flush-headingTwo","data-bs-parent":"#accordionFlushExample"},J={class:"accordion-body"},K={class:"row p-3"},Q={__name:"FilterDropDown",props:{modelValue:Object,FilterList:Array},emits:["update:modelValue"],setup(i,{emit:b}){const n=i,l=v({...n.modelValue}),m=b;return g(l,a=>{m("update:modelValue",{...a})},{deep:!0}),g(()=>n.FilterList,a=>{a&&a.forEach(u=>{u.name in l.value||(l.value[u.name]="")})},{immediate:!0}),(a,u)=>(o(),s("div",R,[e("div",G,[u[0]||(u[0]=e("h2",{class:"accordion-header",id:"flush-headingTwo"},[e("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseTwo","aria-expanded":"false","aria-controls":"flush-collapseTwo"}," Filters ")],-1)),e("div",H,[e("div",J,[e("div",K,[(o(!0),s(k,null,w(n.FilterList,r=>(o(),s("div",{class:"col-md-4",key:r.name},[j(q,{modelValue:l.value[r.name],"onUpdate:modelValue":x=>l.value[r.name]=x,label:r.name.charAt(0).toUpperCase()+r.name.slice(1),placeholder:`Enter ${r.name}`,type:r.type,id:r.name},null,8,["modelValue","onUpdate:modelValue","label","placeholder","type","id"])]))),128))])])])])]))}},pe=A(Q,[["__scopeId","data-v-e8d4d2b8"]]),W={class:"container-fluid"},X={key:0,class:"text-primary"},Y={key:1,class:"text-danger"},Z=["href"],ee={key:2,class:"table table-bordered table-hover container-fluid"},te={class:"table-light"},ae={class:"row btn-holder"},le=["onClick"],se=["onClick"],oe={key:3,class:"text-muted"},ne={class:"pageselect"},re={"aria-label":"Page navigation example"},ie={class:"pagination"},ue={__name:"Table",props:{TableName:{type:String,required:!0},FilterList:Object},setup(i){const b=P(),n=v(0),l=v(5);function m(p){n.value=p}const a=i,u=U(a.TableName);function r(p){b.push(`/Admin/${a.TableName}/view/${p}`)}function x(p){b.push(`/Admin/${a.TableName}/update/${p}`)}const d=v([]),_=v([]),f=v(!1),h=v(null),y=async()=>{if(a.TableName){f.value=!0,h.value=null;try{const t=(await u.getAll(n.value,l.value,a.FilterList)).data;d.value=Array.isArray(t)?t:[t],_.value=d.value.length?Object.keys(d.value[0]):[]}catch(p){console.log(h),h.value=p.message,d.value=[],_.value=[]}finally{f.value=!1}}};return N(()=>Math.ceil(d.value.length/l.value)),I(y),g(()=>a.TableName,y),g(()=>l.value,y),g(()=>n.value,y),g(()=>a.FilterList,()=>{y()},{deep:!0}),(p,t)=>(o(),s("div",W,[f.value?(o(),s("div",X,t[4]||(t[4]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):$("",!0),h.value?(o(),s("div",Y,V(h.value),1)):$("",!0),e("div",null,[e("a",{href:`/Admin/${a.TableName}/create`,class:"btn btn-primary"},"Thêm mới",8,Z)]),d.value.length?(o(),s("table",ee,[e("thead",te,[e("tr",null,[(o(!0),s(k,null,w(_.value,c=>(o(),s("th",{key:c},V(c),1))),128)),t[5]||(t[5]=e("th",null,"Action",-1))])]),e("tbody",null,[(o(!0),s(k,null,w(d.value,(c,D)=>(o(),s("tr",{key:D},[(o(!0),s(k,null,w(_.value,T=>(o(),s("td",{key:T},V(c[T]),1))),128)),e("td",ae,[e("button",{type:"button",onClick:T=>r(c.id),class:"btn btn-primary me-2 row-6"},"View",8,le),e("button",{type:"button",onClick:T=>x(c.id),class:"btn btn-primary me-2 row-6"},"Edit",8,se),e("button",{type:"button",onClick:t[0]||(t[0]=()=>{}),class:"btn btn-danger row-6"},"Delete")])]))),128))])])):$("",!0),!d.value.length&&!f.value&&!h.value?(o(),s("div",oe)):$("",!0),e("div",ne,[S(e("select",{id:"pageSize",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=c=>l.value=c)},t[6]||(t[6]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:15},"15",-1)]),512),[[M,l.value]]),e("nav",re,[e("ul",ie,[e("li",{class:F(["page-item",{disabled:n.value===0}])},[e("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[2]||(t[2]=C(c=>n.value>0&&m(n.value-1),["prevent"]))},t[7]||(t[7]=[e("span",{"aria-hidden":"true"},"«",-1)]))],2),e("li",{class:F(["page-item",{disabled:d.value.length<l.value}])},[e("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[3]||(t[3]=C(c=>d.value.length>=l.value&&m(n.value+1),["prevent"]))},t[8]||(t[8]=[e("span",{"aria-hidden":"true"},"»",-1)]))],2)])])])]))}},me=A(ue,[["__scopeId","data-v-6d7cbe05"]]);export{pe as F,me as T};
